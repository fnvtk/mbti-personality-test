<!--pages/ai-test/camera.wxml - AI拍照页面-->
<view class="container">
  <!-- 相机区域 -->
  <view class="camera-section">
    <camera 
      class="camera"
      device-position="front"
      flash="off"
      binderror="onCameraError"
    ></camera>
    
    <!-- 拍照引导框 -->
    <view class="guide-overlay">
      <view class="guide-circle"></view>
      <text class="guide-text">{{guideText}}</text>
    </view>
  </view>

  <!-- 拍照进度 -->
  <view class="progress-section">
    <view class="progress-dots">
      <view class="progress-dot {{photoIndex >= 1 ? 'active' : ''}}">
        <text class="dot-label">正面</text>
      </view>
      <view class="progress-line {{photoIndex >= 2 ? 'active' : ''}}"></view>
      <view class="progress-dot {{photoIndex >= 2 ? 'active' : ''}}">
        <text class="dot-label">左侧45°</text>
      </view>
      <view class="progress-line {{photoIndex >= 3 ? 'active' : ''}}"></view>
      <view class="progress-dot {{photoIndex >= 3 ? 'active' : ''}}">
        <text class="dot-label">右侧45°</text>
      </view>
    </view>
  </view>

  <!-- 已拍照片预览 -->
  <view class="preview-section" wx:if="{{photos.length > 0}}">
    <view class="preview-list">
      <view class="preview-item" wx:for="{{photos}}" wx:key="index">
        <image class="preview-image" src="{{item}}" mode="aspectFill"></image>
        <view class="preview-delete" bindtap="deletePhoto" data-index="{{index}}">✕</view>
      </view>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="action-section">
    <view class="btn-capture" bindtap="takePhoto">
      <view class="btn-capture-inner"></view>
    </view>
    <text class="capture-tip">点击拍照 ({{photoIndex}}/3)</text>
  </view>

  <!-- 完成按钮 -->
  <view class="complete-section" wx:if="{{photos.length === 3}}">
    <view class="btn btn-primary" bindtap="completeCapture">
      <text class="btn-text">开始AI分析</text>
    </view>
  </view>
</view>
